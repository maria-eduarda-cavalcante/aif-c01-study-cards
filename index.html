<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AWS Certified AI Practitioner (AIF-C01) â€” Study Cards & Mock Exam</title>
  <meta name="description" content="Study cards and interactive mock exam (AIF-C01) on a single GitHub Pages-ready page."/>
  <style>
    :root{
      --bg:#0b1220; --panel:#111a2e; --ink:#e6eefc; --muted:#9ab0d6; --accent:#4ba3ff; --ok:#27c93f; --bad:#ff4d4f;
      --card:#0e172a; --chip:#17213a; --border:#223155; --overlay: rgba(6, 12, 24, .75);
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;color:var(--ink);background:linear-gradient(180deg,#060b16,#0b1220 35%,#0b1220)}
    a{color:var(--accent)}
    .container{max-width:1100px;margin:0 auto;padding:24px}
    header{display:flex;gap:16px;align-items:center;justify-content:space-between;margin-bottom:20px}
    .brand{display:flex;gap:12px;align-items:center}
    .logo{width:40px;height:40px;border-radius:10px;background:radial-gradient(circle at 30% 30%,#4ba3ff 0,#2f6fff 40%,#0e2a6b 100%);box-shadow:0 6px 18px rgba(17,106,255,.35)}
    h1{font-size:22px;letter-spacing:.2px;margin:0}
    .tabs{display:flex;gap:8px;flex-wrap:wrap}
    .tab{background:var(--panel);border:1px solid var(--border);color:var(--ink);padding:10px 14px;border-radius:12px;cursor:pointer}
    .tab[aria-selected="true"]{outline:2px solid var(--accent)}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(260px,1fr));gap:16px}
    .gamify{display:flex;flex-wrap:wrap;gap:12px;margin-bottom:18px;align-items:stretch}
    .gamify .panel{flex:1 1 240px;background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:0 10px 22px rgba(0,0,0,.22);position:relative;overflow:hidden}
    .gamify .panel h2{margin:0 0 10px 0;font-size:16px}
    .gamify .panel p{margin:4px 0;font-size:13px;color:var(--muted)}
    .xp-bar{height:12px;background:rgba(75,163,255,.15);border-radius:999px;overflow:hidden;position:relative;margin-top:6px}
    .xp-fill{height:100%;width:0;background:linear-gradient(90deg,#4ba3ff,#27c93f);border-radius:999px;transition:width .6s ease}
    .xp-level{display:flex;justify-content:space-between;font-size:12px;color:var(--muted);margin-top:6px}
    .xp-boost{position:absolute;top:10px;right:12px;font-size:12px;color:var(--accent);opacity:0;transform:translateY(-8px);transition:opacity .3s ease,transform .3s ease}
    .xp-boost.show{opacity:1;transform:translateY(0)}
    .badge-list{display:flex;flex-wrap:wrap;gap:6px;margin-top:6px}
    .badge{display:inline-flex;align-items:center;gap:6px;background:var(--chip);border:1px solid var(--border);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--ink)}
    .badge.locked{opacity:.35;filter:grayscale(1)}
    .badge .emoji{font-size:16px}
    .quest-status{display:flex;justify-content:space-between;align-items:center;margin-top:10px;padding:8px 10px;border-radius:12px;background:rgba(75,163,255,.12);font-size:13px}
    .quest-status strong{font-size:16px}
    .quest-progress{width:100%;height:8px;background:rgba(255,255,255,.08);border-radius:999px;margin-top:8px;overflow:hidden}
    .quest-fill{height:100%;background:linear-gradient(90deg,#ffb347,#ff6b6b);width:0;border-radius:999px;transition:width .5s ease}
    .toast{position:fixed;left:50%;bottom:24px;transform:translate(-50%,40px);background:rgba(17,26,46,.95);border:1px solid var(--border);color:var(--ink);padding:12px 18px;border-radius:14px;box-shadow:0 16px 32px rgba(0,0,0,.35);opacity:0;pointer-events:none;z-index:10000;transition:transform .4s ease,opacity .4s ease}
    .toast.show{opacity:1;transform:translate(-50%,0)}
    .card{background:var(--card);border:1px solid var(--border);border-radius:16px;padding:16px;box-shadow:0 12px 24px rgba(0,0,0,.25)}
    .card h3{margin:0 0 8px 0;font-size:16px}
    .muted{color:var(--muted)}
    .chip{display:inline-block;padding:6px 10px;border-radius:999px;background:var(--chip);border:1px solid var(--border);font-size:12px;margin:3px 6px 0 0;cursor:pointer;user-select:none}
    .chip:focus{outline:2px solid var(--accent)}
    .qpanel{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:18px}
    .qtext{font-size:16px;margin:0 0 10px 0}
    .opt{display:flex;gap:10px;align-items:flex-start;background:var(--card);border:1px solid var(--border);padding:10px;border-radius:12px;margin:8px 0;cursor:pointer}
    .opt input{margin-top:2px}
    .opt.correct{outline:2px solid var(--ok);background:rgba(39,201,63,.08)}
    .opt.wrong{outline:2px solid var(--bad);background:rgba(255,77,79,.08)}
    .explain{margin-top:10px;color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .spacer{height:14px}
    .footer{margin-top:24px;color:var(--muted);font-size:12px}
    .pill{padding:4px 10px;border:1px solid var(--border);border-radius:999px;background:var(--chip)}
    .stat{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border:1px solid var(--border);border-radius:999px;background:var(--chip)}
    .hidden{display:none !important}
    .overlay{position:fixed;inset:0;background:var(--overlay);display:flex;align-items:center;justify-content:center;padding:20px;z-index:9999}
    .modal{max-width:720px;width:100%;max-height:90vh;background:var(--panel);border:1px solid var(--border);border-radius:16px;box-shadow:0 22px 60px rgba(0,0,0,.45);overflow:auto}
    .modal header{display:flex;justify-content:space-between;align-items:center;padding:16px 18px;border-bottom:1px solid var(--border)}
    .modal header h3{margin:0;font-size:18px}
    .modal .body{padding:18px}
    .tag{display:inline-block;margin:0 6px 6px 0;padding:4px 8px;border:1px solid var(--border);border-radius:999px;background:var(--chip);font-size:12px;color:var(--muted)}
    .close{background:transparent;border:1px solid var(--border);color:var(--ink);border-radius:10px;padding:6px 10px;cursor:pointer}
    .close:hover{border-color:var(--accent)}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo"></div>
        <div>
          <h1>AIF-C01 Study Cards + Mock Exam</h1>
          <div class="muted">Unofficial study aid built from the public exam guide.</div>
        </div>
      </div>
      <nav class="tabs" role="tablist">
        <button class="tab" role="tab" id="tab-cards" data-view="cards" aria-controls="view-cards" aria-selected="true" type="button">Study Cards</button>
        <button class="tab" role="tab" id="tab-quiz" data-view="quiz" aria-controls="view-quiz" aria-selected="false" type="button">Mock Exam</button>
        <button class="tab" role="tab" id="tab-how" data-view="how" aria-controls="view-how" aria-selected="false" type="button">How to Publish</button>
      </nav>
    </header>

    <section class="gamify" aria-live="polite">
      <div class="panel" id="xpPanel">
        <h2>Focus Journey</h2>
        <p>Earn XP with every correct answer and level up while you study.</p>
        <div class="xp-boost" id="xpBoost">+0 XP</div>
        <div class="xp-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" aria-label="Progress toward the next level">
          <div class="xp-fill" id="xpFill"></div>
        </div>
        <div class="xp-level">
          <span id="xpLevel">Level 1</span>
          <span id="xpNext">0 / 0 XP</span>
        </div>
        <div class="xp-level" style="margin-top:8px">
          <span>Total: <strong id="xpTotal">0 XP</strong></span>
          <span>Streak: <strong id="xpStreak">0 ðŸ”¥</strong></span>
        </div>
      </div>
      <div class="panel">
        <h2>Achievements</h2>
        <p>Unlock badges by staying focused and practicing consistently.</p>
        <div class="badge-list" id="badgeList"></div>
      </div>
    </section>

    <section id="view-cards" role="tabpanel" aria-labelledby="tab-cards">
      <div class="grid">
        <div class="card">
          <h3>Core AWS Services</h3>
          <div class="muted">Compute Â· Storage Â· Networking Â· Security integration Â· Automation</div>
          <div class="spacer"></div>
          <div>
            <span class="chip" data-key="EC2" tabindex="0">EC2</span>
            <span class="chip" data-key="Lambda" tabindex="0">Lambda</span>
            <span class="chip" data-key="ECS" tabindex="0">ECS</span>
            <span class="chip" data-key="EKS" tabindex="0">EKS</span>
            <span class="chip" data-key="ELB" tabindex="0">ELB</span>
            <span class="chip" data-key="S3" tabindex="0">S3</span>
            <span class="chip" data-key="Glacier" tabindex="0">Glacier</span>
            <span class="chip" data-key="EBS" tabindex="0">EBS</span>
            <span class="chip" data-key="EFS" tabindex="0">EFS</span>
            <span class="chip" data-key="VPC" tabindex="0">VPC</span>
            <span class="chip" data-key="CloudFront" tabindex="0">CloudFront</span>
            <span class="chip" data-key="PrivateLink" tabindex="0">PrivateLink</span>
            <span class="chip" data-key="IAM" tabindex="0">IAM</span>
            <span class="chip" data-key="KMS" tabindex="0">KMS</span>
          </div>
        </div>

        <div class="card">
          <h3>Databases & Analytics</h3>
          <div class="muted">Operational stores Â· ETL Â· BI Â· Vector search</div>
          <div class="spacer"></div>
          <div>
            <span class="chip" data-key="RDS" tabindex="0">RDS</span>
            <span class="chip" data-key="DynamoDB" tabindex="0">DynamoDB</span>
            <span class="chip" data-key="Neptune" tabindex="0">Neptune</span>
            <span class="chip" data-key="DocumentDB" tabindex="0">DocumentDB</span>
            <span class="chip" data-key="OpenSearch" tabindex="0">OpenSearch</span>
            <span class="chip" data-key="Aurora" tabindex="0">Aurora</span>
            <span class="chip" data-key="Glue" tabindex="0">Glue</span>
            <span class="chip" data-key="DataBrew" tabindex="0">DataBrew</span>
            <span class="chip" data-key="LakeFormation" tabindex="0">Lake Formation</span>
            <span class="chip" data-key="Redshift" tabindex="0">Redshift</span>
            <span class="chip" data-key="QuickSight" tabindex="0">QuickSight</span>
            <span class="chip" data-key="EMR" tabindex="0">EMR</span>
            <span class="chip" data-key="DataExchange" tabindex="0">Data Exchange</span>
          </div>
        </div>

        <div class="card">
          <h3>Security, Identity & Compliance</h3>
          <div class="muted">Protect data Â· Access control Â· Audit Â· Compliance</div>
          <div class="spacer"></div>
          <div>
            <span class="chip" data-key="Macie" tabindex="0">Macie</span>
            <span class="chip" data-key="CloudTrail" tabindex="0">CloudTrail</span>
            <span class="chip" data-key="Config" tabindex="0">Config</span>
            <span class="chip" data-key="AuditManager" tabindex="0">Audit Manager</span>
            <span class="chip" data-key="Artifact" tabindex="0">Artifact</span>
            <span class="chip" data-key="TrustedAdvisor" tabindex="0">Trusted Advisor</span>
          </div>
        </div>

        <div class="card">
          <h3>Governance, Monitoring & Cost</h3>
          <div class="muted">Best practices Â· Observability Â· Budgeting</div>
          <div class="spacer"></div>
          <div>
            <span class="chip" data-key="WellArchitected" tabindex="0">Well-Architected Tool</span>
            <span class="chip" data-key="CloudWatch" tabindex="0">CloudWatch</span>
            <span class="chip" data-key="Budgets" tabindex="0">Budgets</span>
            <span class="chip" data-key="CostExplorer" tabindex="0">Cost Explorer</span>
            <span class="chip" data-key="ModelMonitor" tabindex="0">Model Monitor</span>
            <span class="chip" data-key="ComputeOptimizer" tabindex="0">Compute Optimizer</span>
          </div>
        </div>
      </div>
    </section>

    <section id="view-quiz" class="hidden" role="tabpanel" aria-labelledby="tab-quiz">
      <div class="card" id="questCard" style="margin-bottom:16px">
        <h3>Focus Quest ðŸŽ®</h3>
        <p class="muted" id="questMessage">Answer 5 questions correctly in a row to earn a bonus XP reward. Mistakes reset the chain.</p>
        <div class="quest-status"><span>Progress</span> <strong id="questCount">0 / 5</strong></div>
        <div class="quest-progress" aria-hidden="true"><div class="quest-fill" id="questFill"></div></div>
      </div>
      <div class="row" style="justify-content:space-between;margin-bottom:12px">
        <div class="stat"><span>Questions:</span>
          <select id="numQuestions" class="tab" style="padding:6px 10px;border-radius:10px;background:var(--chip)">
            <option value="10">10</option>
            <option value="20">20</option>
            <option value="30">30</option>
            <option value="40">40</option>
            <option value="50" selected>50</option>
          </select>
        </div>
        <div class="row">
          <span class="pill" id="prog">0 / 0</span>
          <span class="pill" id="score">Score: 0</span>
        </div>
      </div>
      <div id="qroot" class="qpanel"></div>
      <div class="row" style="margin-top:12px;justify-content:space-between">
        <div class="row">
          <button class="tab" id="prevBtn" type="button">â—€ Prev</button>
          <button class="tab" id="nextBtn" type="button">Next â–¶</button>
        </div>
        <div class="row">
          <button class="tab" id="checkBtn" type="button">Check Answer</button>
          <button class="tab" id="finishBtn" type="button">Finish</button>
          <button class="tab" id="startBtn" type="button">Start New Mock</button>
        </div>
      </div>
      <div id="final" class="card hidden" style="margin-top:16px">
        <h3>Results</h3>
        <div id="finalText" class="muted"></div>
      </div>
    </section>

    <section id="view-how" class="hidden" role="tabpanel" aria-labelledby="tab-how" style="margin-top:20px">
      <div class="card">
        <h3>Publish to GitHub Pages (manual steps)</h3>
        <ol>
          <li>Create a new public repo (for example <span class="pill">aif-c01-study-cards</span>).</li>
          <li>Add <b>index.html</b>, <b>.nojekyll</b>, <b>404.html</b>, <b>README.md</b>, and <b>LICENSE</b> to the <b>main</b> branch.</li>
          <li>In <b>Settings â†’ Pages</b>, choose Source = <b>Deploy from a branch</b>, Branch = <b>main</b>, Folder = <b>root</b>.</li>
          <li>Visit: <code>https://&lt;your-user&gt;.github.io/aif-c01-study-cards/</code></li>
        </ol>
      </div>
    </section>

    <div class="footer">Content aligned with the public AIF-C01 guide. Unofficial study resource.</div>
  </div>

  <div id="overlay" class="overlay hidden" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal" role="document">
      <header>
        <h3 id="modalTitle"></h3>
        <button class="close" id="modalClose" type="button" aria-label="Close">Close (Esc)</button>
      </header>
      <div class="body">
        <div id="modalTags"></div>
        <p id="modalDesc"></p>
        <p id="modalPurpose"></p>
        <p id="modalExample"></p>
      </div>
    </div>
  </div>

  <script>
    const DATA = {
      EC2:{name:"Amazon EC2",category:"Core AWS Services",desc:"Elastic compute service for launching and managing virtual servers.",purpose:"Choose EC2 when you need full OS control, GPUs, or custom networking for AI workloads.",example:"Train a PyTorch model on a g5.xlarge instance that streams training data from Amazon S3."},
      Lambda:{name:"AWS Lambda",category:"Core AWS Services",desc:"Serverless compute triggered by events.",purpose:"Run lightweight transformations and inference without provisioning infrastructure.",example:"Invoke an inference function whenever a new object lands in Amazon S3."},
      ECS:{name:"Amazon ECS",category:"Core AWS Services",desc:"Fully managed container orchestration.",purpose:"Deploy and scale AI microservices without operating your own control plane.",example:"Serve a FastAPI inference workload behind an Application Load Balancer."},
      EKS:{name:"Amazon EKS",category:"Core AWS Services",desc:"Managed Kubernetes control plane.",purpose:"Run scalable AI platforms that rely on Kubernetes tooling and operators.",example:"Deploy a Helm chart with Horizontal Pod Autoscaling for a model endpoint."},
      ELB:{name:"Elastic Load Balancing",category:"Core AWS Services",desc:"Managed traffic distribution across targets.",purpose:"Increase availability and balance requests across compute nodes.",example:"Route /predict traffic through an Application Load Balancer to multiple ECS tasks."},
      S3:{name:"Amazon S3",category:"Core AWS Services",desc:"Durable object storage for any scale.",purpose:"Centralize data lakes, training artifacts, and logs for AI workloads.",example:"Host the training dataset and model checkpoints that are consumed during pipelines."},
      Glacier:{name:"Amazon S3 Glacier",category:"Core AWS Services",desc:"Low-cost archival storage tiers in S3.",purpose:"Retain historical checkpoints and datasets that must be kept but rarely accessed.",example:"Archive older model versions while keeping them recoverable for audits."},
      EBS:{name:"Amazon EBS",category:"Core AWS Services",desc:"Block storage volumes for EC2 instances.",purpose:"Provide predictable high I/O performance for training jobs or databases.",example:"Attach a Provisioned IOPS volume to a training instance handling large feature stores."},
      EFS:{name:"Amazon EFS",category:"Core AWS Services",desc:"Elastic, shared file system with NFS access.",purpose:"Share datasets and outputs across multiple compute nodes with automatic scaling.",example:"Allow distributed training workers to read and write to a common directory."},
      VPC:{name:"Amazon VPC",category:"Core AWS Services",desc:"Logically isolated virtual network.",purpose:"Control subnets, routing, and security groups for AI environments.",example:"Deploy private model endpoints inside isolated subnets with custom security rules."},
      CloudFront:{name:"Amazon CloudFront",category:"Core AWS Services",desc:"Global content delivery network.",purpose:"Accelerate static assets and APIs with low latency worldwide.",example:"Serve a model monitoring dashboard and inference assets closer to users."},
      PrivateLink:{name:"AWS PrivateLink",category:"Core AWS Services",desc:"Private connectivity to AWS and partner services.",purpose:"Keep traffic off the public internet when consuming managed AI services.",example:"Access Amazon Bedrock or SageMaker endpoints through interface VPC endpoints."},
      IAM:{name:"AWS IAM",category:"Core AWS Services",desc:"Identity and access management for AWS.",purpose:"Enforce least-privilege access and securely manage permissions.",example:"Create a role that grants read-only access to training data stored in S3."},
      KMS:{name:"AWS KMS",category:"Core AWS Services",desc:"Managed encryption keys and key policies.",purpose:"Protect data at rest and control cryptographic operations.",example:"Encrypt S3 buckets and database storage with a customer managed key."},
      RDS:{name:"Amazon RDS",category:"Databases & Analytics",desc:"Managed relational databases.",purpose:"Store transactional or reference data without handling patching or backups.",example:"Persist user metadata and inference logs in an RDS PostgreSQL instance."},
      DynamoDB:{name:"Amazon DynamoDB",category:"Databases & Analytics",desc:"Managed key-value and document NoSQL database.",purpose:"Deliver single-digit millisecond latency at massive scale.",example:"Persist chat session state and personalization data for an AI assistant."},
      Neptune:{name:"Amazon Neptune",category:"Databases & Analytics",desc:"Managed graph database service.",purpose:"Model relationships, knowledge graphs, or fraud detection patterns.",example:"Store entities and relationships that enrich retrieval-augmented generation prompts."},
      DocumentDB:{name:"Amazon DocumentDB",category:"Databases & Analytics",desc:"Managed JSON document database (MongoDB-compatible).",purpose:"Support flexible semi-structured workloads with minimal operations.",example:"Capture conversation history documents for grounding conversational AI."},
      OpenSearch:{name:"Amazon OpenSearch",category:"Databases & Analytics",desc:"Search, analytics, and vector database platform.",purpose:"Combine full-text, log analytics, and semantic vector search for RAG solutions.",example:"Index embeddings and retrieve the top-k passages for prompt augmentation."},
      Aurora:{name:"Amazon Aurora",category:"Databases & Analytics",desc:"MySQL- and PostgreSQL-compatible relational database.",purpose:"Provide high-throughput OLTP with automated replication and backups.",example:"Process application transactions that power AI-driven user experiences."},
      Glue:{name:"AWS Glue",category:"Databases & Analytics",desc:"Serverless data integration and catalog service.",purpose:"Clean, transform, and catalog datasets for downstream analytics and ML.",example:"Run PySpark jobs that normalize raw CSV files from Amazon S3 into curated tables."},
      DataBrew:{name:"AWS Glue DataBrew",category:"Databases & Analytics",desc:"Visual, no-code data preparation tool.",purpose:"Enable analysts to profile, clean, and publish datasets without writing code.",example:"Apply visual transformations and export curated features back to Amazon S3."},
      LakeFormation:{name:"AWS Lake Formation",category:"Databases & Analytics",desc:"Centralized governance for data lakes.",purpose:"Manage fine-grained permissions and auditing across analytics services.",example:"Grant table-level access to curated features used by SageMaker."},
      Redshift:{name:"Amazon Redshift",category:"Databases & Analytics",desc:"Petabyte-scale cloud data warehouse.",purpose:"Run complex SQL analytics and BI workloads at scale.",example:"Aggregate usage metrics and cost telemetry for AI applications."},
      QuickSight:{name:"Amazon QuickSight",category:"Databases & Analytics",desc:"Serverless business intelligence service.",purpose:"Create interactive dashboards that track ML KPIs without managing infrastructure.",example:"Publish a performance dashboard showing accuracy, latency, and cost trends."},
      EMR:{name:"Amazon EMR",category:"Databases & Analytics",desc:"Managed big data platform for Apache Spark, Hadoop, and more.",purpose:"Process large-scale datasets or feature engineering pipelines with open-source frameworks.",example:"Execute distributed feature generation using Spark on spot instances."},
      DataExchange:{name:"AWS Data Exchange",category:"Databases & Analytics",desc:"Marketplace for third-party datasets and APIs.",purpose:"Augment models and analytics with curated external data sources.",example:"Subscribe to a demographic dataset that enriches model training."},
      Macie:{name:"Amazon Macie",category:"Security, Identity & Compliance",desc:"Managed data security and privacy service for S3.",purpose:"Automatically discover and protect sensitive data such as PII.",example:"Alert when unencrypted training data containing PII is uploaded to S3."},
      CloudTrail:{name:"AWS CloudTrail",category:"Security, Identity & Compliance",desc:"Event history of AWS account activity and API calls.",purpose:"Provide auditing, troubleshooting, and compliance evidence.",example:"Investigate who modified a production model endpoint configuration."},
      Config:{name:"AWS Config",category:"Security, Identity & Compliance",desc:"Resource inventory and compliance monitoring.",purpose:"Continuously evaluate configurations against governance rules.",example:"Detect S3 buckets that are missing mandatory encryption settings."},
      AuditManager:{name:"AWS Audit Manager",category:"Security, Identity & Compliance",desc:"Automates evidence collection for audits.",purpose:"Map controls to industry frameworks and track compliance posture.",example:"Generate SOC 2 and ISO 27001-ready audit reports with collected evidence."},
      Artifact:{name:"AWS Artifact",category:"Security, Identity & Compliance",desc:"Self-service access to AWS compliance reports.",purpose:"Download certifications, agreements, and security documents on demand.",example:"Share the latest SOC 2 report with an external auditor."},
      TrustedAdvisor:{name:"AWS Trusted Advisor",category:"Security, Identity & Compliance",desc:"Automated best-practice checks across cost, performance, and security.",purpose:"Continuously optimize cloud environments with actionable recommendations.",example:"Identify idle GPU instances that can be resized or stopped."},
      WellArchitected:{name:"Well-Architected Tool",category:"Governance, Monitoring & Cost",desc:"Guided reviews across the AWS Well-Architected pillars.",purpose:"Assess workloads and capture improvement plans for reliability, security, and cost.",example:"Review an ML pipeline and record remediation items for each pillar."},
      CloudWatch:{name:"Amazon CloudWatch",category:"Governance, Monitoring & Cost",desc:"Monitoring, logging, and automated responses for AWS workloads.",purpose:"Collect metrics, logs, and events to keep AI systems observable.",example:"Alert operators when model latency exceeds the agreed SLO."},
      Budgets:{name:"AWS Budgets",category:"Governance, Monitoring & Cost",desc:"Custom cost and usage thresholds with alerts.",purpose:"Stay ahead of spending surprises across AI experiments and production.",example:"Notify finance when model hosting costs reach 80% of the monthly target."},
      CostExplorer:{name:"AWS Cost Explorer",category:"Governance, Monitoring & Cost",desc:"Interactive cost visualization and forecasts.",purpose:"Analyze trends by service, account, or tag to manage AI investments.",example:"Compare EC2 training spend versus managed SageMaker usage."},
      ModelMonitor:{name:"SageMaker Model Monitor",category:"Governance, Monitoring & Cost",desc:"Automated drift and quality monitoring for deployed models.",purpose:"Detect data or prediction deviations before they impact customers.",example:"Compare live inference data with a baseline to flag data drift."},
      ComputeOptimizer:{name:"AWS Compute Optimizer",category:"Governance, Monitoring & Cost",desc:"Machine-learning powered rightsizing recommendations.",purpose:"Select optimal compute resources and reduce waste.",example:"Downsize over-provisioned training instances based on utilization insights."}
    };

    const qroot = document.getElementById('qroot');
    const body = document.body;
    const overlay = document.getElementById('overlay');
    const closeBtn = document.getElementById('modalClose');
    const titleEl = document.getElementById('modalTitle');
    const tagsEl = document.getElementById('modalTags');
    const descEl = document.getElementById('modalDesc');
    const purposeEl = document.getElementById('modalPurpose');
    const exampleEl = document.getElementById('modalExample');
    const xpFill = document.getElementById('xpFill');
    const xpLevel = document.getElementById('xpLevel');
    const xpNext = document.getElementById('xpNext');
    const xpTotal = document.getElementById('xpTotal');
    const xpStreak = document.getElementById('xpStreak');
    const xpBoost = document.getElementById('xpBoost');
    const badgeList = document.getElementById('badgeList');
    const questCount = document.getElementById('questCount');
    const questFill = document.getElementById('questFill');
    const questMessage = document.getElementById('questMessage');

    const STORAGE_KEY = 'aifc01_gamify_v1';
    const HAS_STORAGE = (()=>{ try{ return typeof localStorage !== 'undefined'; } catch(err){ return false; } })();
    const ACHIEVEMENTS = {
      firstCorrect:{label:'First Focus',emoji:'ðŸŒŸ',desc:'Get your very first question correct.'},
      streak3:{label:'Hot Streak',emoji:'ðŸ”¥',desc:'Answer three questions correctly in a row within one mock.'},
      streakDay3:{label:'Routine Ninja',emoji:'ðŸ“…',desc:'Study on three consecutive days.'},
      questHero:{label:'Quest Hero',emoji:'ðŸŽ®',desc:'Complete the Focus Quest streak.'},
      quizMaster:{label:'Mock Master',emoji:'ðŸ†',desc:'Finish a mock exam with a score of 80% or higher.'}
    };

    function xpRequired(level){
      return 80 + (level-1)*40;
    }

    function loadGamify(){
      let stored=null;
      if(HAS_STORAGE){
        try{ stored = JSON.parse(localStorage.getItem(STORAGE_KEY)); }
        catch(err){ console.warn('Failed to load gamification state', err); }
      }
      const base={
        level:1,
        xpIntoLevel:0,
        xpToNext:xpRequired(1),
        totalXp:0,
        streak:0,
        lastSession:null,
        correctStreak:0,
        bestCorrectStreak:0,
        achievements:{},
        totalCorrect:0,
        quest:{target:5,current:0,completed:false}
      };
      if(stored){
        Object.assign(base, stored);
        base.achievements = Object.assign({}, base.achievements || {});
        base.quest = Object.assign({target:5,current:0,completed:false}, base.quest || {});
        if(!base.xpToNext) base.xpToNext = xpRequired(base.level||1);
      }
      return base;
    }

    const gamify = loadGamify();

    function saveGamify(){
      if(!HAS_STORAGE) return;
      localStorage.setItem(STORAGE_KEY, JSON.stringify(gamify));
    }

    function updateGamifyUI(){
      if(!xpFill) return;
      const ratio = gamify.xpToNext ? Math.min(1, gamify.xpIntoLevel / gamify.xpToNext) : 0;
      xpFill.style.width = `${Math.round(ratio*100)}%`;
      xpFill.parentElement?.setAttribute('aria-valuenow', Math.round(ratio*100));
      xpLevel.textContent = `Level ${gamify.level}`;
      xpNext.textContent = `${Math.round(gamify.xpIntoLevel)} / ${gamify.xpToNext} XP`;
      xpTotal.textContent = `${gamify.totalXp} XP`;
      xpStreak.textContent = `${gamify.streak} ðŸ”¥`;
      renderBadges();
      updateQuestUI();
    }

    let boostTimeout=null;
    function showXpGain(amount){
      if(!xpBoost) return;
      xpBoost.textContent = `+${amount} XP`;
      xpBoost.classList.add('show');
      if(boostTimeout) clearTimeout(boostTimeout);
      boostTimeout = setTimeout(()=>xpBoost.classList.remove('show'), 1200);
    }

    function flashMessage(text){
      const toast=document.createElement('div');
      toast.className='toast';
      toast.textContent=text;
      body.appendChild(toast);
      requestAnimationFrame(()=>toast.classList.add('show'));
      setTimeout(()=>{
        toast.classList.remove('show');
        setTimeout(()=>toast.remove(), 400);
      }, 3200);
    }

    function unlockAchievement(key){
      if(!ACHIEVEMENTS[key]) return;
      if(gamify.achievements[key]) return;
      gamify.achievements[key] = true;
      saveGamify();
      renderBadges();
      flashMessage(`ðŸ… Achievement unlocked: ${ACHIEVEMENTS[key].label}!`);
    }

    function renderBadges(){
      if(!badgeList) return;
      badgeList.innerHTML='';
      Object.keys(ACHIEVEMENTS).forEach(key=>{
        const meta=ACHIEVEMENTS[key];
        const earned=!!gamify.achievements[key];
        const badge=document.createElement('span');
        badge.className=`badge${earned?'':' locked'}`;
        badge.innerHTML=`<span class="emoji">${earned?meta.emoji:'ðŸ”’'}</span><span>${meta.label}</span>`;
        badge.title = earned ? meta.desc : `${meta.desc} (locked)`;
        badgeList.appendChild(badge);
      });
    }

    function awardXp(amount){
      if(!amount) return;
      gamify.totalXp = Math.max(0, Math.round((gamify.totalXp||0) + amount));
      gamify.xpIntoLevel = Math.max(0, (gamify.xpIntoLevel||0) + amount);
      gamify.level = gamify.level || 1;
      gamify.xpToNext = gamify.xpToNext || xpRequired(gamify.level);
      let leveled=false;
      while(gamify.xpIntoLevel >= gamify.xpToNext){
        gamify.xpIntoLevel -= gamify.xpToNext;
        gamify.level +=1;
        gamify.xpToNext = xpRequired(gamify.level);
        leveled=true;
      }
      if(amount>0) showXpGain(amount);
      saveGamify();
      updateGamifyUI();
      if(leveled){
        flashMessage(`ðŸŽ‰ Level up! You're now level ${gamify.level}.`);
      }
    }

    function dateKey(date){
      return date.toISOString().slice(0,10);
    }

    function registerSession(){
      const todayKey = dateKey(new Date());
      if(gamify.lastSession === todayKey) return;
      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate()-1);
      if(gamify.lastSession === dateKey(yesterday)){
        gamify.streak = (gamify.streak||0) + 1;
      } else {
        gamify.streak = 1;
      }
      gamify.lastSession = todayKey;
      saveGamify();
      updateGamifyUI();
      if(gamify.streak >= 3){
        unlockAchievement('streakDay3');
      }
    }

    function resetQuest(){
      gamify.quest = Object.assign({target:5,current:0,completed:false}, gamify.quest||{});
      gamify.quest.current = 0;
      gamify.quest.completed = false;
      gamify.correctStreak = 0;
      saveGamify();
      updateQuestUI();
    }

    function updateQuestUI(){
      if(!questCount || !gamify.quest) return;
      const {target,current,completed} = gamify.quest;
      questCount.textContent = `${Math.min(current,target)} / ${target}`;
      const width = Math.min(100, (current/target)*100);
      if(questFill) questFill.style.width = `${width}%`;
      if(questMessage){
        questMessage.textContent = completed ? 'Quest complete! Keep practicing to extend your streak.' : 'Answer 5 questions correctly in a row to earn a bonus XP reward. Mistakes reset the chain.';
      }
    }

    function updateQuest(isCorrect, statusChanged){
      if(!gamify.quest) gamify.quest = {target:5,current:0,completed:false};
      if(gamify.quest.completed) return;
      if(statusChanged){
        if(isCorrect){
          gamify.quest.current = (gamify.quest.current||0) + 1;
          if(gamify.quest.current >= gamify.quest.target){
            gamify.quest.completed = true;
            awardXp(30);
            unlockAchievement('questHero');
            flashMessage('ðŸŽ® Focus Quest complete! +30 XP');
          }
        } else {
          gamify.quest.current = 0;
        }
        saveGamify();
        updateQuestUI();
      }
    }

    function recordCorrect(isCorrect, statusChanged){
      if(!statusChanged) return;
      if(isCorrect){
        gamify.correctStreak = (gamify.correctStreak||0) + 1;
        gamify.bestCorrectStreak = Math.max(gamify.bestCorrectStreak||0, gamify.correctStreak);
        gamify.totalCorrect = (gamify.totalCorrect||0) + 1;
        if(gamify.totalCorrect === 1){
          unlockAchievement('firstCorrect');
        }
        if(gamify.correctStreak >= 3){
          unlockAchievement('streak3');
        }
      } else {
        gamify.correctStreak = 0;
      }
      saveGamify();
    }

    updateGamifyUI();

    function showView(view){
      const ids = {cards:'#view-cards', quiz:'#view-quiz', how:'#view-how'};
      for(const k in ids){
        const el = document.querySelector(ids[k]);
        const tab = document.querySelector(`[data-view="${k}"]`);
        if(!el || !tab) continue;
        if(k === view){ el.classList.remove('hidden'); tab.setAttribute('aria-selected','true'); }
        else{ el.classList.add('hidden'); tab.setAttribute('aria-selected','false'); }
      }
    }

    let lastFocus = null;
    const focusableSelector = 'button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';

    function openModal(key){
      const it = DATA[key];
      if(!it){ console.warn('Missing DATA entry for', key); return; }
      titleEl.textContent = it.name;
      const tags = [`<span class="tag">Acronym: ${key}</span>`];
      if(it.category) tags.push(`<span class="tag">Category: ${it.category}</span>`);
      tagsEl.innerHTML = tags.join('');
      descEl.innerHTML = `<b>Overview:</b> ${it.desc}`;
      purposeEl.innerHTML = `<b>When to use it:</b> ${it.purpose}`;
      exampleEl.innerHTML = `<b>Example scenario:</b> ${it.example}`;
      lastFocus = document.activeElement;
      if(!overlay) return;
      overlay.classList.remove('hidden');
      overlay.removeAttribute('aria-hidden');
      body.style.setProperty('overflow','hidden');
      if(closeBtn) closeBtn.focus();
    }
    function isModalOpen(){
      return overlay && !overlay.classList.contains('hidden');
    }
    function closeModal(){
      if(!isModalOpen()) return;
      overlay.classList.add('hidden');
      overlay.setAttribute('aria-hidden','true');
      body.style.removeProperty('overflow');
      titleEl.textContent=''; tagsEl.innerHTML=''; descEl.innerHTML=''; purposeEl.innerHTML=''; exampleEl.innerHTML='';
      if(lastFocus && typeof lastFocus.focus==='function'){ lastFocus.focus(); }
      lastFocus = null;
    }
    function trapFocus(e){
      if(e.key!=='Tab' || overlay.classList.contains('hidden')) return;
      const focusable = Array.from(overlay.querySelectorAll(focusableSelector)).filter(el=>!el.hasAttribute('disabled'));
      if(focusable.length===0) return;
      const first = focusable[0];
      const last = focusable[focusable.length-1];
      if(e.shiftKey){
        if(document.activeElement===first){ e.preventDefault(); last.focus(); }
      } else {
        if(document.activeElement===last){ e.preventDefault(); first.focus(); }
      }
    }

    // Question bank (short sample; generate ~30-40 following the pattern)
    const BANK = [
      {domain:"Core",type:"single",q:"Which service provides virtual machines for training or inference?",opts:["AWS Lambda","Amazon EC2","Amazon S3","Amazon CloudFront"],ans:[1],ex:"EC2 provides resizable compute; Lambda is serverless."},
      {domain:"Core",type:"single",q:"Which service is object storage for data lakes used in ML?",opts:["Amazon EFS","Amazon EBS","Amazon S3","Amazon Redshift"],ans:[2],ex:"S3 stores datasets, artifacts, logs."},
      {domain:"Core",type:"multi",q:"Select the container orchestration services.",opts:["Amazon ECS","Amazon EKS","AWS Batch","AWS Lambda"],ans:[0,1],ex:"ECS and EKS orchestrate containers; Lambda is FaaS."},
      {domain:"DBA",type:"single",q:"Which database is a fully managed NoSQL key-value store?",opts:["Amazon RDS","Amazon DynamoDB","Amazon Neptune","Amazon DocumentDB"],ans:[1],ex:"DynamoDB is NoSQL KV."},
      {domain:"Sec",type:"single",q:"Which service manages encryption keys for data at rest?",opts:["AWS IAM","AWS KMS","AWS Artifact","AWS Budgets"],ans:[1],ex:"KMS handles keys used by many services."},
      {domain:"Core",type:"single",q:"Which service lets you run code in response to events without managing servers?",opts:["Amazon EC2","AWS Lambda","Amazon ECS","Amazon EKS"],ans:[1],ex:"Lambda is event-driven serverless compute."},
      {domain:"Core",type:"single",q:"Which service simplifies running batch jobs at scale?",opts:["AWS Batch","Amazon SQS","AWS Glue","Amazon EMR"],ans:[0],ex:"AWS Batch manages compute environments for batch jobs."},
      {domain:"Core",type:"multi",q:"Which services can distribute incoming application traffic?",opts:["Elastic Load Balancing","Amazon CloudFront","AWS WAF","AWS IAM"],ans:[0,1],ex:"ELB balances traffic and CloudFront caches globally."},
      {domain:"DBA",type:"single",q:"Which managed service offers graph database capabilities?",opts:["Amazon Neptune","Amazon RDS","Amazon Redshift","AWS Glue"],ans:[0],ex:"Neptune is built for graph workloads."},
      {domain:"DBA",type:"single",q:"Which service provides managed data warehousing for analytics?",opts:["Amazon Redshift","Amazon Aurora","Amazon DynamoDB","Amazon Athena"],ans:[0],ex:"Redshift is the data warehouse."},
      {domain:"DBA",type:"multi",q:"Select services commonly used for ETL pipelines.",opts:["AWS Glue","Amazon S3","Amazon CloudFront","AWS Budgets"],ans:[0,1],ex:"Glue transforms data stored in S3."},
      {domain:"DBA",type:"single",q:"Which BI service delivers dashboards with pay-per-session pricing?",opts:["Amazon QuickSight","Amazon Athena","Amazon EMR","AWS Lake Formation"],ans:[0],ex:"QuickSight offers serverless BI dashboards."},
      {domain:"DBA",type:"multi",q:"Which services support vector search workloads?",opts:["Amazon OpenSearch","Amazon DynamoDB","Amazon S3","Amazon Redshift"],ans:[0],ex:"OpenSearch includes vector search support."},
      {domain:"Sec",type:"single",q:"Which service helps classify sensitive data in S3 buckets?",opts:["Amazon Macie","AWS IAM","AWS KMS","AWS Shield"],ans:[0],ex:"Macie uses ML to detect PII."},
      {domain:"Sec",type:"single",q:"Which service records API activity for governance and auditing?",opts:["AWS Config","AWS CloudTrail","Amazon CloudWatch","AWS Trusted Advisor"],ans:[1],ex:"CloudTrail logs API calls."},
      {domain:"Sec",type:"multi",q:"Select services that help assess compliance posture.",opts:["AWS Audit Manager","AWS Artifact","Amazon Inspector","AWS CodeCommit"],ans:[0,1],ex:"Audit Manager and Artifact support compliance evidence."},
      {domain:"Sec",type:"single",q:"Which service lets you centrally define and enforce resource configuration rules?",opts:["AWS Config","AWS IAM","AWS Secrets Manager","AWS Backup"],ans:[0],ex:"Config evaluates configuration compliance."},
      {domain:"Governance",type:"single",q:"Which tool guides architectural reviews using AWS best practices?",opts:["AWS Trusted Advisor","AWS Well-Architected Tool","AWS Organizations","AWS Budgets"],ans:[1],ex:"Well-Architected Tool reviews workloads against pillars."},
      {domain:"Governance",type:"multi",q:"Select services that provide cost visibility and controls.",opts:["AWS Budgets","AWS Cost Explorer","Amazon CloudFront","AWS Systems Manager"],ans:[0,1],ex:"Budgets and Cost Explorer focus on spend management."},
      {domain:"Governance",type:"single",q:"Which service offers automated recommendations to right-size compute?",opts:["AWS Compute Optimizer","Amazon Inspector","AWS Config","AWS Budgets"],ans:[0],ex:"Compute Optimizer analyzes utilization to suggest changes."},
      {domain:"Governance",type:"single",q:"Which service aggregates operational telemetry like metrics and logs?",opts:["Amazon CloudWatch","AWS CloudTrail","AWS X-Ray","AWS Systems Manager"],ans:[0],ex:"CloudWatch centralizes metrics and logs."},
      {domain:"Governance",type:"multi",q:"Which services provide ongoing security recommendations?",opts:["AWS Trusted Advisor","Amazon GuardDuty","AWS Budgets","AWS Cost Explorer"],ans:[0,1],ex:"Trusted Advisor and GuardDuty surface security findings."},
      {domain:"Governance",type:"single",q:"Which service helps discover unused GPU instances to cut costs?",opts:["AWS Trusted Advisor","AWS Budgets","AWS Config","AWS CloudTrail"],ans:[0],ex:"Trusted Advisor flags underutilized resources."},
      {domain:"Core",type:"single",q:"Which storage service offers long-term archival with retrieval in hours?",opts:["Amazon S3 Glacier","Amazon EFS","Amazon EBS","Amazon DynamoDB"],ans:[0],ex:"S3 Glacier provides archival tiers."},
      {domain:"Core",type:"multi",q:"Which services provide shared file storage?",opts:["Amazon EFS","Amazon FSx","Amazon S3","AWS Lambda"],ans:[0,1],ex:"EFS and FSx deliver shared file systems."},
      {domain:"Core",type:"single",q:"Which service builds managed Kubernetes control planes?",opts:["Amazon EKS","Amazon ECS","AWS Batch","AWS Fargate"],ans:[0],ex:"EKS manages Kubernetes clusters."},
      {domain:"Core",type:"single",q:"Which network service enables private connectivity to AWS services?",opts:["AWS PrivateLink","Amazon Route 53","AWS Direct Connect","Amazon CloudFront"],ans:[0],ex:"PrivateLink exposes services via private endpoints."},
      {domain:"DBA",type:"single",q:"Which service catalogs data assets and enforces granular permissions in a lake?",opts:["AWS Lake Formation","AWS Glue","Amazon Athena","Amazon Redshift"],ans:[0],ex:"Lake Formation handles catalog and permissions."},
      {domain:"DBA",type:"multi",q:"Which services can run serverless SQL on S3?",opts:["Amazon Athena","Amazon Redshift Serverless","AWS Batch","AWS Glue DataBrew"],ans:[0,1],ex:"Athena and Redshift Serverless query S3 data."},
      {domain:"DBA",type:"single",q:"Which service offers managed MongoDB-compatible document storage?",opts:["Amazon DocumentDB","Amazon DynamoDB","Amazon Neptune","Amazon Keyspaces"],ans:[0],ex:"DocumentDB is MongoDB compatible."},
      {domain:"DBA",type:"multi",q:"Which analytics services integrate with QuickSight dashboards?",opts:["Amazon Athena","Amazon Redshift","Amazon S3","AWS Snowball"],ans:[0,1,2],ex:"QuickSight can read from Athena, Redshift, and S3 datasets."},
      {domain:"Sec",type:"single",q:"Which service provides managed secrets storage with automatic rotation?",opts:["AWS Secrets Manager","AWS KMS","Amazon Cognito","AWS Identity Center"],ans:[0],ex:"Secrets Manager stores and rotates secrets."},
      {domain:"Sec",type:"multi",q:"Which services help detect anomalies in AWS accounts?",opts:["Amazon GuardDuty","AWS CloudTrail","AWS Macie","AWS Artifact"],ans:[0,2],ex:"GuardDuty and Macie detect anomalous activity."},
      {domain:"Sec",type:"single",q:"Which service delivers downloadable compliance reports like SOC 2?",opts:["AWS Artifact","AWS Audit Manager","AWS Config","AWS Shield"],ans:[0],ex:"Artifact hosts AWS compliance reports."},
      {domain:"Sec",type:"single",q:"Which identity service provides federated SSO to AWS accounts and apps?",opts:["AWS Identity Center","AWS IAM","Amazon Cognito","AWS Directory Service"],ans:[0],ex:"Identity Center (IAM Identity Center) manages SSO."},
      {domain:"Sec",type:"multi",q:"Which features support least privilege access design?",opts:["IAM roles","IAM policies","Amazon CloudFront","AWS Snowball"],ans:[0,1],ex:"Least privilege is enforced via roles and policies."},
      {domain:"Governance",type:"single",q:"Which service provides cost anomaly detection alerts?",opts:["AWS Cost Explorer","AWS Budgets","AWS Compute Optimizer","AWS Savings Plans"],ans:[1],ex:"Budgets can trigger cost anomaly alerts."},
      {domain:"Governance",type:"single",q:"Which service collects and queries logs from multiple AWS accounts?",opts:["Amazon CloudWatch Logs","AWS Config","AWS Organizations","AWS IAM"],ans:[0],ex:"CloudWatch Logs aggregates and queries logs."},
      {domain:"Governance",type:"multi",q:"Which services integrate with Organizations for multi-account governance?",opts:["AWS Config","AWS CloudTrail","Amazon S3","AWS Backup"],ans:[0,1,3],ex:"Config, CloudTrail, and Backup integrate with Organizations."},
      {domain:"Core",type:"single",q:"Which service accelerates delivery of static assets globally?",opts:["Amazon CloudFront","Amazon Route 53","AWS Direct Connect","AWS Global Accelerator"],ans:[0],ex:"CloudFront is the CDN for static content."},
      {domain:"Core",type:"multi",q:"Which compute services support GPU instances for ML training?",opts:["Amazon EC2","Amazon SageMaker","AWS Lambda","AWS Batch"],ans:[0,1,3],ex:"EC2, SageMaker, and Batch can run GPU workloads."},
      {domain:"Core",type:"single",q:"Which service provisions isolated virtual networks inside AWS?",opts:["Amazon VPC","Amazon CloudFront","AWS Transit Gateway","AWS Direct Connect"],ans:[0],ex:"VPC defines isolated networking."},
      {domain:"DBA",type:"single",q:"Which managed service is ideal for storing session state with millisecond latency?",opts:["Amazon DynamoDB","Amazon Redshift","Amazon S3","Amazon Timestream"],ans:[0],ex:"DynamoDB offers low-latency key-value storage."},
      {domain:"DBA",type:"multi",q:"Which services help build data lakes?",opts:["Amazon S3","AWS Lake Formation","AWS Glue","AWS IAM"],ans:[0,1,2],ex:"S3 stores data while Lake Formation and Glue govern and catalog it."},
      {domain:"Sec",type:"single",q:"Which service offers DDoS protection for web apps?",opts:["AWS Shield","AWS WAF","Amazon CloudFront","AWS Budgets"],ans:[0],ex:"Shield provides managed DDoS protection."},
      {domain:"Sec",type:"multi",q:"Which services provide network layer security controls?",opts:["Security Groups","Network ACLs","AWS Artifact","AWS Macie"],ans:[0,1],ex:"Security groups and NACLs control network traffic."},
      {domain:"GenAI",type:"single",q:"Which service offers managed foundation models with API access?",opts:["Amazon Bedrock","Amazon SageMaker","AWS Lambda","Amazon Polly"],ans:[0],ex:"Bedrock provides FM access via API."},
      {domain:"GenAI",type:"multi",q:"Which services support customizing foundation models with your data?",opts:["Amazon Bedrock","Amazon SageMaker","AWS IAM","Amazon QuickSight"],ans:[0,1],ex:"Bedrock and SageMaker support fine-tuning and customization."},
      {domain:"GenAI",type:"single",q:"Which service manages feature stores and pipelines for ML?",opts:["Amazon SageMaker","Amazon Athena","AWS Glue","Amazon EMR"],ans:[0],ex:"SageMaker includes pipelines, feature store, and training."},
      {domain:"GenAI",type:"single",q:"Which service can schedule notebooks and pipelines without managing servers?",opts:["Amazon SageMaker Studio","AWS Lambda","AWS Fargate","Amazon EC2"],ans:[0],ex:"SageMaker Studio orchestrates notebooks and pipelines."},
      {domain:"GenAI",type:"multi",q:"Which services help monitor deployed models for drift?",opts:["SageMaker Model Monitor","Amazon CloudWatch","AWS Budgets","AWS Glue"],ans:[0,1],ex:"Model Monitor and CloudWatch track model quality and metrics."},
      {domain:"GenAI",type:"single",q:"Which service enables experimentation with different FMs using a playground UI?",opts:["Amazon Bedrock","Amazon S3","AWS Glue","AWS Budgets"],ans:[0],ex:"Bedrock console offers a playground for FMs."},
      {domain:"GenAI",type:"single",q:"Which service can orchestrate ML workflows with managed steps and triggers?",opts:["Amazon SageMaker Pipelines","AWS Step Functions","Amazon SNS","Amazon EventBridge"],ans:[0],ex:"SageMaker Pipelines orchestrates ML workflows."}
    ];

    let deck=[], idx=0, score=0, checked=false, selections={}, results={};
    let finishBonusGiven=false;

    function startMock(){
      const n = parseInt(document.getElementById('numQuestions').value,10);
      deck = [...BANK].sort(()=>Math.random()-0.5).slice(0, Math.min(n, BANK.length));
      idx=0; score=0; selections={}; results={}; checked=false; finishBonusGiven=false;
      resetQuest();
      registerSession();
      updateMeta(); renderQ(); document.getElementById('final').classList.add('hidden');
    }
    function updateMeta(){
      const solved = Object.values(results||{}).filter(r=>r && r.correct).length;
      score = solved;
      document.getElementById('prog').textContent = `${Math.min(idx+1, deck.length)} / ${deck.length}`;
      document.getElementById('score').textContent = `Score: ${score}`;
    }
    function renderQ(){
      if(deck.length === 0){ qroot.innerHTML = '<p class="muted">Start a new mock to load questions.</p>'; return; }
      const q = deck[idx]; qroot.innerHTML='';
      const h = document.createElement('div');
      h.innerHTML = `<div class="row" style="justify-content:space-between">
        <div><span class="pill">Domain: ${q.domain}</span></div>
        <div class="pill">Type: ${q.type==='multi'?'Multiple-response':'Multiple-choice'}</div>`;
      qroot.appendChild(h);
      const p = document.createElement('p'); p.className='qtext'; p.textContent=q.q; qroot.appendChild(p);
      const chosen = selections[idx]||[];
      q.opts.forEach((opt,i)=>{
        const label=document.createElement('label'); label.className='opt';
        const input=document.createElement('input'); input.type=q.type==='multi'?'checkbox':'radio'; input.name='opt'; input.value=i;
        if(chosen.includes(i)) input.checked=true;
        input.addEventListener('change',()=>{
          if(q.type==='multi'){ const set=new Set(selections[idx]||[]); input.checked?set.add(i):set.delete(i); selections[idx]=[...set]; }
          else { selections[idx]=[i]; document.querySelectorAll('#qroot input[name="opt"]').forEach(other=>{ if(other!==input) other.checked=false; }); }
        });
        const span=document.createElement('span'); span.textContent=opt;
        label.appendChild(input); label.appendChild(span); qroot.appendChild(label);
      });
      const ex=document.createElement('div'); ex.className='explain hidden'; ex.id='explain'; ex.textContent=q.ex; qroot.appendChild(ex);
      checked=false; updateMeta();
    }
    function check(){
      if(checked || deck.length===0) return;
      const q = deck[idx];
      const chosen=new Set(selections[idx]||[]);
      const correct=new Set(q.ans);
      const isCorrect = chosen.size===correct.size && [...chosen].every(x=>correct.has(x));
      const prevStatus = results[idx]?.correct;
      const statusChanged = prevStatus !== isCorrect;
      results[idx] = {correct:isCorrect};
      if(statusChanged && isCorrect){
        const bonus = q.type==='multi'?12:10;
        awardXp(bonus);
      }
      recordCorrect(isCorrect, statusChanged);
      updateQuest(isCorrect, statusChanged);
      document.querySelectorAll('#qroot .opt').forEach((lab,i)=>{
        if(correct.has(i)) lab.classList.add('correct');
        if(chosen.has(i) && !correct.has(i)) lab.classList.add('wrong');
      });
      document.getElementById('explain').classList.remove('hidden'); checked=true; updateMeta();
    }
    function move(d){
      if(deck.length===0) return;
      idx=Math.min(Math.max(0,idx+d),deck.length-1); renderQ();
    }
    function finish(){
      if(deck.length===0) return;
      document.getElementById('final').classList.remove('hidden');
      const solved = Object.values(results||{}).filter(r=>r && r.correct).length;
      score = solved;
      const pct=Math.round((score/deck.length)*100);
      document.getElementById('finalText').innerHTML = `You scored <b>${score}</b> of <b>${deck.length}</b> (${pct}%).<br>`+(pct>=70?"Looks good vs 700/1000 threshold.":"Keep practicing!");
      if(!finishBonusGiven){
        awardXp(20);
        finishBonusGiven=true;
      }
      if(pct>=80 && deck.length>=10){
        unlockAchievement('quizMaster');
      }
      window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
    }

    document.addEventListener('DOMContentLoaded', () => {
      overlay.classList.add('hidden');

      document.querySelectorAll('[role="tab"]').forEach(btn=>{
        btn.addEventListener('click', ()=> showView(btn.dataset.view));
      });
      showView('cards');

      document.querySelectorAll('.chip[data-key]').forEach(chip=>{
        chip.addEventListener('click', ()=>openModal(chip.dataset.key));
        chip.addEventListener('keydown', (e)=>{
          if(e.key==='Enter' || e.key===' ') { e.preventDefault(); openModal(chip.dataset.key); }
        });
      });

      if(closeBtn){
        closeBtn.addEventListener('click', closeModal);
        closeBtn.addEventListener('keydown', (e)=>{
          if(e.key==='Enter' || e.key===' '){ e.preventDefault(); closeModal(); }
        });
      }
      if(overlay){
        overlay.addEventListener('click', (e)=>{ if(e.target===overlay) closeModal(); });
        overlay.addEventListener('keydown', trapFocus);
      }
      document.addEventListener('keydown', (e)=>{
        if((e.key==='Escape' || e.key==='Esc') && isModalOpen()){
          e.preventDefault();
          closeModal();
        }
      });

      document.getElementById('startBtn').addEventListener('click', startMock);
      document.getElementById('checkBtn').addEventListener('click', check);
      document.getElementById('nextBtn').addEventListener('click', ()=>move(1));
      document.getElementById('prevBtn').addEventListener('click', ()=>move(-1));
      document.getElementById('finishBtn').addEventListener('click', finish);

      startMock();
    });
  </script>
</body>
</html>
